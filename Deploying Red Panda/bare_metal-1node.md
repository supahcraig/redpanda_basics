# RPM install on EC2 for a single node


https://docs.redpanda.com/current/deploy/deployment-option/self-hosted/manual/production/dev-deployment/

---


## Run the installer

```
curl -1sLf 'https://dl.redpanda.com/nzc4ZYQK3WRGd9sy/redpanda/cfg/setup/bash.deb.sh' | \
sudo -E bash && sudo apt-get install redpanda-console -y
```


## Bootstrap the Cluster

Where the `--ips` flag is set to the private IP of your broker.

```
sudo rpk redpanda config bootstrap --self $(hostname -I) --ips 10.100.7.153
sudo rpk redpanda config set redpanda.empty_seed_starts_cluster false
```

### Resulting /etc/redpanda/redpanda.yaml

This is the config that will be generated by the boostrap command.  You may want to change the rpc_server, kafka_api, and admin listener addresses to `0.0.0.0`

```
redpanda:
    data_directory: /var/lib/redpanda/data
    empty_seed_starts_cluster: false
    seed_servers:
        - host:
            address: 10.100.7.153
            port: 33145
    rpc_server:
        address: 10.100.7.153
        port: 33145
    kafka_api:
        - address: 10.100.7.153
          port: 9092
    admin:
        - address: 10.100.7.153
          port: 9644
    advertised_rpc_api:
        address: 10.100.7.153
        port: 33145
    advertised_kafka_api:
        - address: 10.100.7.153
          port: 9092
    developer_mode: true
rpk:
    coredump_dir: /var/lib/redpanda/coredump
pandaproxy: {}
schema_registry: {}
```

## Start Redpanda


```
sudo systemctl start redpanda-tuner redpanda
```

### Verify Cluster

`rpk cluster health`

should return something like

```
CLUSTER HEALTH OVERVIEW
=======================
Healthy:                          true
Unhealthy reasons:                []
Controller ID:                    0
All nodes:                        [0]
Nodes down:                       []
Leaderless partitions (0):        []
Under-replicated partitions (0):  []
```

and `rpk cluster info` should return the ip of your single node.

```
CLUSTER
=======
redpanda.8ab99fa3-1ab2-4db6-bf54-eb42f96ee319

BROKERS
=======
ID    HOST          PORT
0*    10.100.7.153  9092
```

## Connections from a remote machine

This is the barebones way to make it work.  More sophisticated listener setups with different advertised addresses/ports is possible.

On your local machine, the rpk profile needs to look like this, and the EC2 instance must be open to traffic from the source on 9092 & 9644 (for kafka & admin apis).


```
kafka_api:
    brokers:
        - 3.17.174.176:9092
admin_api:
    addresses:
        - 3.17.174.176:9644
```






